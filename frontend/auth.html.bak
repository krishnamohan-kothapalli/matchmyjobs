<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sign In — MatchMyJobs</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/shared.css">
<style>
body{background:var(--ink);min-height:100svh;display:flex;flex-direction:column}
.auth-page{flex:1;display:grid;grid-template-columns:1fr 1fr;min-height:calc(100svh - 62px)}
.auth-left{background:var(--ink);padding:4rem 3rem;display:flex;flex-direction:column;justify-content:center;position:relative;overflow:hidden}
.auth-left::before{content:'';position:absolute;top:-30%;right:-20%;width:500px;height:500px;background:radial-gradient(circle,rgba(0,200,150,0.1) 0%,transparent 65%);pointer-events:none}
.auth-left-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(0,200,150,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,200,150,0.03) 1px,transparent 1px);background-size:48px 48px}
.auth-left-in{position:relative;z-index:1;max-width:440px;margin:0 auto;width:100%}
.auth-tagline{font-family:var(--font-d);font-size:clamp(2rem,3.5vw,2.8rem);font-weight:800;color:#fff;line-height:1.1;letter-spacing:-0.025em;margin-bottom:1rem}
.auth-tagline em{color:var(--green);font-style:italic}
.auth-tagline-sub{font-size:0.95rem;color:rgba(255,255,255,0.4);line-height:1.7;font-weight:300;margin-bottom:2.5rem}
.auth-proof{display:flex;flex-direction:column;gap:0.85rem}
.proof-item{display:flex;align-items:center;gap:0.75rem;font-size:0.875rem;color:rgba(255,255,255,0.5)}
.proof-check{width:22px;height:22px;background:rgba(0,200,150,0.15);border:1px solid rgba(0,200,150,0.3);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--green);font-size:0.7rem;font-weight:700}

.auth-right{background:var(--white);padding:4rem 3rem;display:flex;flex-direction:column;justify-content:center;align-items:center}
.auth-box{width:100%;max-width:420px}
.auth-tabs{display:flex;background:var(--bg);border-radius:var(--r);padding:4px;margin-bottom:2rem;gap:4px}
.auth-tab{flex:1;padding:0.6rem;border-radius:8px;border:none;background:none;font-family:var(--font-b);font-size:0.875rem;font-weight:600;color:var(--slate);cursor:pointer;transition:all 0.18s}
.auth-tab.active{background:var(--white);color:var(--ink);box-shadow:var(--sh)}
.auth-form{animation:fadeIn 0.25s ease both}
.auth-form h2{font-family:var(--font-d);font-size:1.6rem;font-weight:800;color:var(--ink);margin-bottom:0.4rem;letter-spacing:-0.02em}
.auth-form p{font-size:0.875rem;color:var(--slate);margin-bottom:1.75rem;line-height:1.5}
.btn-google{width:100%;display:flex;align-items:center;justify-content:center;gap:0.75rem;padding:0.75rem;border:1.5px solid var(--border);border-radius:var(--r);background:var(--white);font-family:var(--font-b);font-size:0.9rem;font-weight:600;color:var(--ink);cursor:pointer;transition:all 0.15s;margin-bottom:1.25rem}
.btn-google:hover{border-color:var(--ink-2);background:var(--bg);transform:translateY(-1px);box-shadow:var(--sh)}
.divider{display:flex;align-items:center;gap:1rem;margin-bottom:1.25rem}
.divider::before,.divider::after{content:'';flex:1;height:1px;background:var(--border)}
.divider span{font-size:0.75rem;color:var(--mist);font-weight:500;text-transform:uppercase;letter-spacing:0.06em}
.field{margin-bottom:1.1rem}
.field label{display:block;font-size:0.8rem;font-weight:600;color:var(--ink-2);margin-bottom:0.4rem;letter-spacing:0.01em}
.field input{width:100%;padding:0.7rem 1rem;border:1.5px solid var(--border);border-radius:var(--r);font-family:var(--font-b);font-size:0.9rem;color:var(--ink);background:var(--white);transition:border-color 0.15s,box-shadow 0.15s;outline:none}
.field input:focus{border-color:var(--green);box-shadow:0 0 0 3px rgba(0,200,150,0.1)}
.field input::placeholder{color:var(--mist)}
.btn-submit{width:100%;padding:0.8rem;background:var(--green);color:#fff;border:none;border-radius:var(--r);font-family:var(--font-b);font-size:0.95rem;font-weight:700;cursor:pointer;transition:all 0.18s;margin-bottom:1.1rem}
.btn-submit:hover{background:var(--green-d);transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,200,150,0.25)}
.btn-submit:disabled{opacity:0.6;cursor:not-allowed;transform:none;box-shadow:none}
.auth-switch{text-align:center;font-size:0.85rem;color:var(--slate)}
.auth-switch a{color:var(--green);font-weight:600;text-decoration:none;cursor:pointer}
.auth-switch a:hover{text-decoration:underline}
.err-box{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:0.75rem 1rem;border-radius:var(--r);font-size:0.85rem;margin-bottom:1rem;display:none}
.err-box.show{display:block;animation:fadeIn 0.2s ease}
@media(max-width:768px){
  .auth-page{grid-template-columns:1fr}
  .auth-left{display:none}
  .auth-right{padding:2.5rem 1.5rem;min-height:calc(100svh - 62px)}
}
</style>
</head>
<body>
<nav class="nav">
  <div class="nav-inner">
    <a href="index.html" class="logo"><span class="logo-1">Match</span><span class="logo-2">MyJobs</span></a>
    <div class="nav-right">
      <a href="index.html" class="btn-nav-ghost">← Back to Home</a>
    </div>
  </div>
</nav>

<div class="auth-page">
  <div class="auth-left">
    <div class="auth-left-grid"></div>
    <div class="auth-left-in">
      <h2 class="auth-tagline">Get the score<em>before you apply.</em></h2>
      <p class="auth-tagline-sub">Join thousands of job seekers who know exactly where they stand — before hitting submit.</p>
      <div class="auth-proof">
        <div class="proof-item"><div class="proof-check">✓</div><span>2 full analyses completely free</span></div>
        <div class="proof-item"><div class="proof-check">✓</div><span>9-factor ATS scoring in under 30s</span></div>
        <div class="proof-item"><div class="proof-check">✓</div><span>Workday, Greenhouse, Taleo + iCIMS</span></div>
        <div class="proof-item"><div class="proof-check">✓</div><span>Exact keywords and fixes, not vague tips</span></div>
        <div class="proof-item"><div class="proof-check">✓</div><span>No credit card required</span></div>
      </div>
    </div>
  </div>

  <div class="auth-right">
    <div class="auth-box">
      <div class="auth-tabs">
        <button class="auth-tab active" id="tab-in" onclick="switchTab('in')">Sign In</button>
        <button class="auth-tab" id="tab-up" onclick="switchTab('up')">Sign Up</button>
      </div>

      <div class="err-box" id="err-box"></div>

      <!-- SIGN IN -->
      <div id="form-in" class="auth-form">
        <h2>Welcome back</h2>
        <p>Sign in to access your analyses and dashboard</p>
        <button class="btn-google" onclick="googleAuth()">
          <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/><path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
          Continue with Google
        </button>
        <div class="divider"><span>or</span></div>
        <div class="field"><label>Email address</label><input type="email" id="in-email" placeholder="you@example.com" autocomplete="email"></div>
        <div class="field"><label>Password</label><input type="password" id="in-pass" placeholder="••••••••" autocomplete="current-password"></div>
        <button class="btn-submit" id="in-btn" onclick="signIn()">Sign In</button>
        <p class="auth-switch">No account? <a onclick="switchTab('up')">Sign up free →</a></p>
      </div>

      <!-- SIGN UP -->
      <div id="form-up" class="auth-form" style="display:none">
        <h2>Get started free</h2>
        <p>Create your account and get 2 free analyses</p>
        <button class="btn-google" onclick="googleAuth()">
          <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/><path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
          Continue with Google
        </button>
        <div class="divider"><span>or</span></div>
        <div class="field"><label>Full name</label><input type="text" id="up-name" placeholder="Jane Doe" autocomplete="name"></div>
        <div class="field"><label>Email address</label><input type="email" id="up-email" placeholder="you@example.com" autocomplete="email"></div>
        <div class="field"><label>Password <span style="color:var(--mist);font-weight:400">(min. 8 characters)</span></label><input type="password" id="up-pass" placeholder="••••••••" autocomplete="new-password"></div>
        <button class="btn-submit" id="up-btn" onclick="signUp()">Create Free Account</button>
        <p class="auth-switch">Already have an account? <a onclick="switchTab('in')">Sign in →</a></p>
      </div>
    </div>
  </div>
</div>

<script>
const API='https://matchmyjobs.onrender.com';
function switchTab(t){
  document.getElementById('tab-in').classList.toggle('active',t==='in');
  document.getElementById('tab-up').classList.toggle('active',t==='up');
  document.getElementById('form-in').style.display=t==='in'?'block':'none';
  document.getElementById('form-up').style.display=t==='up'?'block':'none';
  hideErr();
}
function showErr(msg){const b=document.getElementById('err-box');b.textContent=msg;b.classList.add('show');}
function hideErr(){document.getElementById('err-box').classList.remove('show');}
function setLoading(id,on,txt){const b=document.getElementById(id);b.disabled=on;b.textContent=on?'Please wait…':txt;}
function saveSession(d){
  localStorage.setItem('authToken',d.token);
  localStorage.setItem('userEmail',d.email);
  localStorage.setItem('userName',d.name||d.email);
  localStorage.setItem('usageData',JSON.stringify({analysesUsed:d.analysesUsed||0,analysesLimit:d.analysesLimit||2,userTier:d.tier||'free',lastUsed:new Date().toISOString()}));
}
async function signIn(){
  hideErr();
  const email=document.getElementById('in-email').value.trim();
  const pass=document.getElementById('in-pass').value;
  if(!email||!pass){showErr('Please enter your email and password.');return;}
  setLoading('in-btn',true,'Sign In');
  try{
    const r=await fetch(`${API}/api/auth/signin`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password:pass})});
    const d=await r.json();
    if(r.ok){saveSession(d);window.location.href='analysis.html';}
    else showErr(d.detail||'Sign in failed. Please try again.');
  }catch{showErr('Cannot connect to server. Please try again.');}
  finally{setLoading('in-btn',false,'Sign In');}
}
async function signUp(){
  hideErr();
  const name=document.getElementById('up-name').value.trim();
  const email=document.getElementById('up-email').value.trim();
  const pass=document.getElementById('up-pass').value;
  if(!name||!email||!pass){showErr('Please fill in all fields.');return;}
  if(pass.length<8){showErr('Password must be at least 8 characters.');return;}
  setLoading('up-btn',true,'Create Free Account');
  try{
    const r=await fetch(`${API}/api/auth/signup`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,password:pass})});
    const d=await r.json();
    if(r.ok){saveSession(d);window.location.href='analysis.html';}
    else showErr(d.detail||'Sign up failed. Please try again.');
  }catch{showErr('Cannot connect to server. Please try again.');}
  finally{setLoading('up-btn',false,'Create Free Account');}
}
function googleAuth(){window.location.href=`${API}/auth/google/login`;}
// Enter key support
document.addEventListener('keydown',e=>{if(e.key==='Enter'){const t=document.getElementById('tab-in').classList.contains('active')?'in':'up';t==='in'?signIn():signUp();}});
// OAuth callback
(function(){
  const p=new URLSearchParams(location.search);
  if(p.has('token')){
    saveSession({token:p.get('token'),email:p.get('email'),name:p.get('name'),tier:'free',analysesUsed:0,analysesLimit:2});
    window.location.href='analysis.html';
  }
  if(p.has('error')) showErr('Google sign-in failed. Please try again.');
})();
// Already logged in
if(localStorage.getItem('authToken')) window.location.href='analysis.html';
</script>
</body>
</html>
